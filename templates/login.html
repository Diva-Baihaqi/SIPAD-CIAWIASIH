{% extends 'base.html' %}

{% block content %}
<div class="flex items-center justify-center min-h-[70vh] py-12">
    <div class="organic-card p-10 max-w-md w-full bg-white/80 relative backdrop-blur-md shadow-2xl">
        <!-- Decoration -->
        <div class="absolute -top-10 -left-10 w-24 h-24 bg-moss/20 rounded-full blur-xl animate-pulse"></div>

        <h2 class="text-4xl font-serif text-center mb-2 text-moss">Masuk Sistem</h2>
        <p class="text-center text-charcoal/60 mb-8 font-sans">Silakan login untuk mengakses data desa.</p>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="px-4 py-3 rounded-2xl mb-6 text-center text-sm font-bold border shadow-inner {{ 'bg-green-50 text-green-700 border-green-200' if category == 'success' else 'bg-red-50 text-red-600 border-red-100' }}"
            role="alert">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <form action="/login" method="POST" class="space-y-6">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <div class="relative">
                <label class="block font-bold mb-2 text-sm text-charcoal pl-3">Username</label>
                <input type="text" name="username" class="input-organic" placeholder="Masukan username..." required>
            </div>
            <div class="relative">
                <label class="block font-bold mb-2 text-sm text-charcoal pl-3">Password</label>
                <input type="password" name="password" class="input-organic" placeholder="••••••••" required>
            </div>
            <div class="text-right text-xs mt-1 mb-6">
                <a href="{{ url_for('reset_password') }}"
                    class="text-moss/80 hover:text-moss font-bold hover:underline">Lupa Password?</a>
            </div>
            <button type="submit" class="btn-organic btn-primary w-full text-lg mt-4 shadow-lg">
                Buka Pintu Desa
            </button>
        </form>

        <div class="mt-8 text-center text-sm opacity-60 font-sans border-t border-timber/50 pt-6">
            <p>Hanya untuk Perangkat Desa yang berwenang.</p>
        </div>
    </div>
</div>
{% endblock %}